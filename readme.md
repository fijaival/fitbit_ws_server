# 前提条件
 - docker
 - google api key json の取得


# ローカルでの実行
postmanでは呼び出せるがwindowsローカルとはつながらない問題発生中

`.env`の`GOOGLE_APPLICATION_CREDENTIALS`にkey.jsonへのpathを指定
(ex.GOOGLE_APPLICATION_CREDENTIALS = ./key.json)

送信するデータ
`accelerometer`
```
{"data_type":"accelerometer","data":[[-0.9002466201782227,-9.3855562210083,1.4940271377563477,507648749],[-0.3830833435058594,-6.454963684082031,0.6320877075195312,507648779],[0.8619384765625,-4.558698654174805,-0.1340789794921875,507648810],[1.321639060974121,-3.926609992980957,-0.17238712310791016,507648840],[1.5514898300170898,-2.4517364501953125,-0.9768638610839844,507648871],[0.5746250152587891,-3.2562131881713867,-0.8044757843017578,507648901],[-0.3447751998901367,-4.213923454284668,-0.9194011688232422,507648931],[-0.7470130920410156,-2.930591583251953,1.0917892456054688,507648962],[-2.068653106689453,-3.2562131881713867,3.4094467163085938,507648992],[-3.620142936706543,-5.976109504699707,5.267403602600098,507649022],[-4.194768905639648,-7.795758247375488,8.427846908569336,507649052],[-5.99526309967041,-5.631333351135254,14.978582382202148,507649083],[-8.485308647155762,-5.516408920288086,19.95867347717285,507649113],[-7.201977729797363,-12.392765045166016,20.437528610229492,507649144],[-2.6815872192382812,-8.791776657104492,18.292259216308594,507649174],[-1.1875600814819336,-2.5858163833618164,17.62186050415039,507649204],[-1.321639060974121,-2.91143798828125,14.7678861618042,507649235],[-1.8196487426757812,-5.32486629486084,11.281822204589844,507649265],[-1.3407936096191406,-6.952973365783691,6.071880340576172,507649296],[-1.5323352813720703,-5.746258735656738,1.9920358657836914,507649326],[-1.8004941940307617,-4.309694290161133,-0.6129341125488281,507649356],[0,-4.328847885131836,-2.2985029220581055,507649387],[1.7430315017700195,-5.229095458984375,-3.524372100830078,507649417],[3.390292167663574,-3.8499937057495117,-4.711932182312012,507649447],[3.026362419128418,-3.524372100830078,-2.030344009399414,507649477],[0.1340789794921875,-5.8037214279174805,-0.708704948425293,507649508],[-0.17238712310791016,-6.244268417358398,-1.1492509841918945,507649538],[-2.6432790756225586,-7.757449150085449,0.3256206512451172,507649569],[-4.386310577392578,-7.527599334716797,3.6392974853515625,507649599],[-5.13332462310791,-5.458946228027344,8.159687995910645,507649629]]}
```
`heart_rate`など
```
{"data_type":"heart_rate","data":{"heartRate":110},"timestamp":507649138}
```
`rpe`
```
{"data_type":"fatigue","data":{"rpe":10},"timestamp":507649138}
```

`finish`
```
{"data_type":"finish","data":{},"timestamp":"2024-10-13T04:08:12.228Z"}  
```


/ws/android_hr エンドポイントが受け取るデータのサンプル:
```
{"heart_rate": 110}
```

# deploy
git hub のmainにマージすると自動的にデプロイされる。(CI)

[ビルド履歴](https://console.cloud.google.com/cloud-build/builds;region=global?query=trigger_id%3D%2248327063-9d48-4b2e-af5e-3be419799a96%22&hl=ja&project=labolatry)

##### reference site
- https://cloud.google.com/run/docs/deploying-source-code?hl=ja
- https://cloud.google.com/run/docs/continuous-deployment-with-cloud-build?hl=ja#setup-cd